---
namespaces:
     global:
        interfaces:
             - type: veth
               peer: nstest1
               my_address: 10.11.64.1/30
               peer_address: 10.11.64.2/30
             - type: veth
               peer: nstest3
               my_address: 10.11.67.1/30
               peer_address: 10.11.67.2/30
             - type: veth
               peer: nstest4
               my_address: 10.11.62.1/30
               peer_address: 10.11.62.2/30
             - name: lo
        routes:
            - destination: 10.11.65.0/24
               nexthop: 10.11.64.2
             - destination: 10.11.70.0/24
               nexthop:
                - via: 10.11.64.2
                  weight: 1
                - via: 10.11.67.2
                  weight: 1
                - via: 10.11.62.2
                  weight: 1

     nstest1:
        interfaces:
             - type: veth
               peer: nstest2
               my_address: 10.11.65.1/30
               peer_address: 10.11.65.2/30
             - name: lo
        routes:
             - destination: 10.11.70.0/24
               nexthop: 10.11.65.2
             - destination: 10.11.60.0/24
               nexthop: 10.11.64.1

     nstest2:
        routes:
             - destination: 10.11.64.0/24
               nexthop: 10.11.65.1
             - destination: 10.11.60.0/24
               # Yay, let's test ECMP
               nexthop:
                 - via: 10.11.66.1
                   weight: 1
                 - via: 10.11.65.1
                   weight: 1
                 - via: 10.11.69.1
                   weight: 1

        interfaces:
             - name: lo
               address: 10.11.70.1/24

     nstest3:
        interfaces:
             - type: veth
               peer: nstest2
               my_address: 10.11.66.1/30
               peer_address: 10.11.66.2/30

        routes:
             - destination: 10.11.70.0/24
               nexthop: 10.11.66.2
             - destination: 10.11.60.0/24
               nexthop: 10.11.67.1

     nstest4:
         interfaces:
            - type: veth
              peer: nstest2
              my_address: 10.11.69.1/30
              peer_address: 10.11.69.2/30
         routes:
            - destination: 10.11.70.0/24
              nexthop:
                 - via: 10.11.69.2
            - destination: 10.11.60.0/24
              nexthop:
                 - via: 10.11.62.1
